<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SIERRA</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />
    <link href="assets/img/logoNew.png" rel="icon" />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- <link
    href="assets/vendor/bootstrap/css/bootstrap.min.css"
    rel="stylesheet"
  /> -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <title>師資介紹</title>
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/login.css" />
  </head>

  <body>
    <!-- ======= Header ======= -->
    <header id="header" class="header fixed-top d-flex align-items-center">
      <div class="container d-flex align-items-center justify-content-between">
        <a
          href="index.html"
          class="logo d-flex align-items-center me-auto me-lg-0"
        >
          <img src="assets/img/logoNew.png" alt="" />
          <h1>SIERRA</h1>
        </a>

        <nav id="navbar" class="navbar">
          <ul>
            <li><a href="index.html">首頁</a></li>
            <li><a href="#about">關於我們</a></li>
            <li class="dropdown">
              <a href="desserts.html#/"
                ><span>甜點</span>
                <i class="bi bi-chevron-down dropdown-indicator"></i
              ></a>
              <ul>
                <li><a href="desserts.html#/moldCake">整模蛋糕</a></li>
                <li><a href="desserts.html#/roomTemperature">常溫蛋糕</a></li>
                <li><a href="desserts.html#/snack">點心</a></li>
                <li><a href="desserts.html#/longCake">長條蛋糕</a></li>
                <li><a href="desserts.html#/presents">禮盒</a></li>
              </ul>
            </li>
            <li><a href="Lessons.html">課程</a></li>
            <li><a href="Teacher.html">師資</a></li>
            <li><a href="#promotion">近期活動</a></li>
            <li class="dropdown">
              <a href="#"
                ><span>常見問題</span>
                <i class="bi bi-chevron-down dropdown-indicator"></i
              ></a>
              <ul>
                <li><a href="rule.html">常見問題</a></li>
              </ul>
            </li>
            <li><a href="#contact">聯絡我們</a></li>
          </ul>
        </nav>
        <!-- .navbar -->

        <div class="d-flex" style="justify-content: space-between">
          <!-- <a class="btn-book-a-table" href="lessonBook.html">預定課程</a> -->
          <div class="shoppingCartDiv me-3">
            <a
              class="js-toggle-cart"
              href="#"
              title="View cart"
              @click="getCartItems()"
            >
              <span class="shoppingCart badge badge-pill badge-warning"></span>
              <i class="bi bi-bag-fill" style="font-size: 35px"></i>
            </a>
          </div>
        </div>
        <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
        <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>
      </div>
    </header>
    <!-- End Header -->
    <div id="app">
      <!-- <table class="table table-bordered table-striped table-hover">
            <thead>
                <tr>
                    <th>照片</th>
                    <th>老師</th>
                    <th>證照</th>
                    <th>專長</th>
                    <th>經歷</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="teacher in teachers" :key="teacher.teacherId">
                    <td>{{teacher.teacherImage}}</td>
                    <td>{{teacher.teacherName}}</td>
                    <td>{{teacher.license}}</td>
                    <td>{{teacher.specialty}}</td>
                    <td>{{teacher.experience}}</td>
                </tr>
            </tbody>
        </table> -->
      <!-- ======= Breadcrumbs ======= -->
      <div class="breadcrumbs">
        <div class="container">
          <div class="d-flex justify-content-between align-items-center">
            <h2>師資</h2>
            <ol>
              <li><a href="index.html">首頁</a></li>
              <li>師資</li>
            </ol>
          </div>
        </div>
      </div>
      <!-- End Breadcrumbs -->
      <div class="container mt-5">
        <div class="row">
          <div
            v-for="teacher in teachers"
            :key="teacher.teacherId"
            class="col-4"
          >
            <div
              class="card card1 border-5"
              style="width: 18rem; margin-bottom: 10px; overflow: hidden"
            >
              <img
                :src="PhotoPath+teacher.teacherImage"
                class="card-img-top"
                alt="Teacher Photo"
              />
              <div class="card-body">
                <h5 class="card-title">{{teacher.teacherName}}</h5>
                <p class="card-text">專長:{{teacher.specialty}}</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">證照:{{teacher.license}}</li>
                <li class="list-group-item">經歷:{{teacher.experience}}</li>
                <li
                  class="list-group-item"
                  v-for="lesson in teacher.lessons"
                  :key="lesson.lessonId"
                >
                  課程:{{lesson.lessonTitle}}
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="clearfix"></div>
      <!-- 新增這行，確保每兩筆 card 在同一 row 的左右兩側 -->
      <nav aria-label="Page navigation example">
        <ul class="pagination">
          <li class="page-item" v-for="(page, index) in totalPages" :key="page">
            <a
              :class="{'currentPage':thePage ===page, 'page-link':true}"
              @click="changePage(page)"
              >{{ page }}</a
            >
          </li>
        </ul>
      </nav>
    </div>
    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer">
      <div class="container">
        <div class="row gy-3">
          <div class="col-lg-3 col-md-6 d-flex">
            <i class="bi bi-geo-alt icon"></i>
            <div>
              <h4>地址</h4>
              <p>
                桃園市中壢區 <br />
                New York, NY 535022 - US<br />
              </p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 footer-links d-flex">
            <i class="bi bi-telephone icon"></i>
            <div>
              <h4>預定方式</h4>
              <p>
                <strong>電話:</strong> +1 5589 55488 55<br />
                <strong>Email:</strong> info@example.com<br />
              </p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 footer-links d-flex">
            <i class="bi bi-clock icon"></i>
            <div>
              <h4>營業時間</h4>
              <p>
                <strong>星期一到六: 11AM</strong> - 23PM<br />
                Sunday: Closed
              </p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 footer-links">
            <h4>Follow Us</h4>
            <div class="social-links d-flex">
              <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
              <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
              <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
              <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="copyright">
          &copy; Copyright <strong><span>SIERRA</span></strong
          >. All Rights Reserved
        </div>
        <div class="credits">Designed by SIERRA</div>
      </div>
    </footer>
    <!-- End Footer -->
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
      integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/vue@3.2.36/dist/vue.global.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"
      integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="assets/js/variables.js"></script>
    <script src="assets/js/cart.js"></script>
    <script src="assets/js/login.js"></script>
    <script>
      var vueapp = {
        data() {
          return {
            teachers: [],
            lessons: [],
            filter: "",
            pageSize: 6,
            thePage: 1,
            totalPages: 0,
            PhotoPath: "/assets/img/",
          };
        },
        methods: {
          // filterTeachers: function () {
          //     //alert("輸入資料")
          //     let _this = this;
          //     var request = {};
          //     request.TeachersId = isNaN(Number(_this.filter)) ? -1 : Number(_this.filter);
          //     request.TeacherName = request.TeacherImage = request.License = request.Specialty = request.Experience = _this.filter;
          //     axios.get(`${baseAddress}api/Teacher`, request).then(response => {
          //         //alert(JSON.stringify(response.data))
          //         _this.teachers = response.data["teachers"];
          //         for (var i = 0; i < _this.teachers.length; i++) {
          //             var teacher = _this.teachers[i];
          //         }
          //     }).catch(err => {
          //         alert(err);
          //     })

          async filterTeachers() {
            let _this = this;
            var request = {
              page: _this.thePage,
              pageSize: _this.pageSize,
            };
            try {
              const response = await axios.get(`${variables.API_URL}Teacher`, {
                params: request,
              });
              _this.teachers = response.data.teachers;
              _this.totalPages = response.data.totalPages;
              _this.lessons = response.data.lessons;
            } catch (error) {
              alert(error);
            }
          },
          changePage: function (page) {
            this.thePage = page;
            this.filterTeachers();
          },
          async getCartItems() {
            const username = localStorage.getItem("username"); // Replace this with the actual username
            try {
              const response = await axios.get(
                `${variables.API_URL}DessertCarts?username=${username}`
              );

              const cartItems = response.data;
              const cartProductsContainer = $(".js-cart-products");
              cartProductsContainer.empty(); // Clear the existing cart items

              if (cartItems.length === 0) {
                // Display the cart empty message if there are no items
                cartProductsContainer.append(
                  '<p class="cart__empty js-cart-empty">新增商品到購物車吧~</p>'
                );
              } else {
                cartItems.forEach((item) => {
                  const cartProductTemplate = `
            <div class="cart__product"  v-for="item in cartItems" :key="item.id">
            <article class="js-cart-product">
            <div class="d-flex">
            <img class="menu-img img-fluid" src="/assets/img/${item.dessertImage}" style="
            height: 50px; width: 50px;   "/>
             <h1 class="product_name ">${item.dessertName}</h1> </div>
              <div class="cart__product__qty">
              數量: <span class="qty">${item.count}</span> * NT
              <span class="dessertPrice">${item.price}</span>         
                <a class="js-remove-product" href="#" title="Delete product" onclick="handleDelete(${item.dessertCartItemId})" >
                  刪除
                </a>
               </div>
            </article>
          </div>
            `;
                  cartProductsContainer.append(cartProductTemplate);
                });
              }
              numberOfProducts = cartItems.length;
              $(".cart__footer .button").text("結帳 " + numberOfProducts);
              $(".shoppingCart").text(numberOfProducts);
            } catch (error) {
              console.error("Error getting cart items:", error);
            }
          },
        },
        mounted: function () {
          this.filterTeachers();
          this.getCartItems();
        },
      };
      var app = Vue.createApp(vueapp).mount("#app");
    </script>
  </body>
</html>
